<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CAISO Queue Dashboard | WattsInsight.AI</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- ① SKELETON STYLES -->
  <style>
    :root { --bg: #f3f4f6; --shimmer: #e5e7eb; }

    /* full-screen cover */
    #loader {
      position: fixed; inset: 0;               /* top+right+bottom+left = 0 */
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      gap: 1rem; background: var(--bg); z-index: 9999;
    }

    /* shimmering “bars” */
    .skel {
      width: 80vw; max-width: 500px; height: 20px; border-radius: 6px;
      background: linear-gradient(90deg,
        var(--bg) 0%, var(--shimmer) 40%, var(--bg) 80%);
      background-size: 200% 100%;
      animation: shimmer 1.2s infinite linear;
    }
    @keyframes shimmer { 0% {background-position: 200% 0}
                         100% {background-position: -200% 0} }

    /* iframe fills the screen */
    html,body {margin:0;height:100%;width:100%;}
    iframe   {border:0;width:100%;height:100vh;}
  </style>
</head>
<body>

  <!-- ② SKELETON MARKUP -->
  <div id="loader">
    <div class="skel"></div>
    <div class="skel" style="width:60%"></div>
    <div class="skel" style="width:90%"></div>
  </div>

  <!-- ③ STREAMLIT APP -->
  <iframe id="app"
          src="https://caiso-queue.streamlit.app/?embed=true"
          allow="clipboard-write; fullscreen"></iframe>

  <!-- ④ HIDE LOADER WHEN IFRAME FINISHES -->
  <script>
    document.getElementById('app').addEventListener('load', () => {
      document.getElementById('loader').style.display = 'none';
    });

    /* failsafe: hide loader after 20 s even if Streamlit errors out */
    setTimeout(() => {
      document.getElementById('loader').style.display = 'none';
    }, 20_000);
  </script>
</body>
</html>
